image: python:alpine3.7
tasks:
  - before: |
      apk add --no-cache bash
      apk add --update git curl vim tar tree
      apk add --no-cache openssl-dev build-base python3-dev libffi-dev openssh
      curl -L -s  -o /usr/bin/ttyd https://github.com/tsl0922/ttyd/releases/download/1.5.0/ttyd_linux.x86_64 
      chmod 755 /usr/bin/ttyd
      
    init: |
      cp config/wrapper_script.sh /usr/local/bin/wrapper_script.sh
      cp config/filebrowser /usr/local/bin/filebrowser
      cp config/config.json /usr/local/bin/config.json
      cp config/cors.list /usr/local/bin/cors.list
      cp config/index.html /usr/bin/index.html
      export CORS_WHITELIST_FILEPATH=/usr/local/bin/cors.list
